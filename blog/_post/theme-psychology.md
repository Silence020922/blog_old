---
title: the evolution  of social relation
date: 2022-11-21
tag: note
---
## 背景
    社交中两派对立的情况很多，例如 政党纷争、 公司制度调整、 处于战争中的国家对于战争的态度、
    对防疫政策严格程度的看待等。    
    在此基于两派对立情况，该文利用符号网络及已有的社会心理学研究成果，对连续时间模型下
    系统的平衡演化进行了探讨。
## 平衡解释
在一个符号网络中，往往利用边权的正负衡量连线双方的友好程度(以"+"代表友好)。仅有两者独立作用的情况是少见的，为此我们考虑一般情况下的最小单位，三角关系。三角关系可分为四种——"+++","++-","+--","---"。接下来我们将解释四种类型三角关系的含义及演化趋向。    
- "+++" ，此时处于稳定状态。参考小团体，内部友好，该时刻稳定。    
- "+--"，此时处于稳定状态。 参考敌人的敌人是朋友。    
- "++-" ，此时处于不稳定状态。 考虑A、B、C三个个体，其中A与B、C为友好，而B、C敌对。此时该三角可能会在A的作用下，推动B与C转变为友好关系"+++"，亦可能在B(C)的影响下使得A与C(B)的关系转变为敌对"+--"。    
- "---"，此时处于不稳定状态。三家对立的情况下，弱者寻求合作，将向"+--"方向转变。
  

由上论述可知，"+++"及"+--"是两种平衡的三角关系，我们往往认为所有的三角为平衡三角形的图为平衡图。
## 平衡图理解
    注意：在上述中可观察得到，平衡三角关系的条件为"-"边有奇数条，为编程提供依据
在这一节中我们考虑一个特殊情况，即完全图。在完全图中，我们可以分为两个派系(即派系内点连边全为"+",派系间的连边全为"-")，对于一个三角关系，或者三点于同一派系，此时稳定"+++"，或者一、二分于两个派系之中，此时亦稳定"+--"，那么我们发现，当一个完全图可以分为两个派系时，为平衡图，反之亦可推。
## 前人栽树
### 离散时间模型
对于离散时间模型目前做`平衡演化的方法`为 ： 在每一个时间步中，检查一条边，若此时翻转该边符号系统中产生稳定三角形的个数大于生成不稳定三角形的个数，则进行翻转。
`存在的问题`：总的来看，平衡图在该模型下得以保留，为该模型中的稳定态。但反过来看，该模型中的稳定态并不能证明确为一平衡图，达到平衡状态前有可能陷入阻滞状态。
### 连续时间模型
对于全连接的社交网络模型，使用$X_{(n*n)}$对应一个带符号的完全图。其中$x_{i,j}$表示点i与点j间的友好or不友好程度。基于ODE     
$$\frac{dX}{dt} = X^2 \qquad [eq1]$$    
推动系统平衡。
## 对$\frac{dX}{dt} = X^2$ 合理性的解释
    在文中第一次出现该式时并未作出解释，原因是后续有许多基于该式作出的结论，
    可以在过程中对此式合理性进行理解。出于人道主义的考虑，在此我做一下通俗的
    介绍，使得初学者不至于昏头昏脑。
为了便于理解，暂时写作分式形式    
$$\frac{dx_{i,j}}{dt} = \sum \limits_{k} {x_{i,k}}{x_{k,j}} \qquad [eq2]$$
- $x_{i,j}$ 表示i对j的态度     

通过这个式子，我们可以看到，i对j的态度由$x_{i,k}、x_{k,j}$决定。且显然的是，若$x_{i,k}和x_{k,j}$具有相同的符号则向positive方向引导$x_{i,j}$，反之。    
我们仍然通过三角结构进行解释。    
- 同号： 此时k与i,j之间或者为"--"或者为"++"，而将i,j之间符号向"+"引导，形成"+++"or"+--"，皆稳定    
- 异号： 此时k于i,j为"+-",对于i,j之间符号向"-"引导，形成"+--",同样为稳定

于是通过以上的解释我们知道，eq.1确实可以推动系统向平衡方向演化。     
额外的，对于i=j的情况，该模型也可以进行合理的解释。这种情况下，无论i-k,k-j间关系如何，$x_{i,i}$都将向positive的方向引导，这是自我认可、自信的体现。
## 后人乘凉
    在这一节中将简单介绍一下本文的成果
本文主要就两个问题进行了解答，一、对于一个一般的初始化矩阵X(0)能否演化到平衡状态。二、对于给定X(0)是或否能够给出平衡结构情况。    
对于第一个问题，我们发现，基于eq.1有将X(0)折叠为秩1的趋势，此时将达到平衡。但对于n时概率测读收敛到0的矩阵不保证能够达到平衡态。    
对于第二个问题，我们给出X(0)在$x_{i,j}$独立于一个有界的绝对连续分布中采样时的一个关于X(0)的封闭表达式。    
综合两个问题得到的结果，我们发现，在n足够大，随机矩阵X(0)按照$x_{i,j}$保证在有界分布中独立选取的前提下，当$\mu$>0,系统平衡态为由正链连接的一团，当$\mu$<0时，将平均划分为两团，其中，团内为正连接，而团间为负连接。     
最后，对和谐和冲突的过度进行了探讨，并基于经验数据的模型估计给出与社会心理学的潜在联系。
## 原理准备
###  求解$\frac{dX}{dt}=  X^2$
假设X(0)为实对称的，有小学一年级学的高等代数我们知道，X(0) = QD(0)$Q^T$。其中，D(0)为对角矩阵，其对角元素为X(0)特征值，且默认$\lambda_1 \geq \lambda_2 ... \geq \lambda_n$。$w_1、w_2..、w_n$为Q列向量，且为X(0)的特征向量，Q为一正交矩阵。接下来我们逐步求解eq.1    
- 单变量 + $x(0) = \lambda_k$    
  对ODE进行求解 $\frac{1}{x^2}dx =  dt \rightarrow -\frac{1}{x} = \lambda_k t + C $根据t=0，$x(0) = \lambda_k$得到，$C = -\frac{1}{\lambda_k}$ ,带入得到$x = \frac{\lambda_k}{1-\lambda_k t}$ 记为$l_k(t)$

- X(0) = diag($\lambda_1,\lambda_2,..\lambda_n$),此时解为D(t) = diag($l_1(t),l_2(t),...,l_n(t)$)    
- 令$Y(t) = QD(t)Q^T$,简单验证，Y为 $\frac{dX}{dt} = x^2$的解，且Y(0) = X(0),根据初值问题解的唯一性，我们可以确定，Y(t)即为我们要找的解
### 形式解的分析
记号一览：  
>$X^{(n)}$:$\frac{d^n X}{dt^n}$    
>$X(0) = QD(0)Q^T$ $\qquad$ $q_{i,j}:Q$     
>$D(t) = diag(l_k)$ $\qquad$   $l_k = \frac{\lambda_k}{1-\lambda_k t}$    

根据上一节，我们对解X(t) = $QD(t)Q^T$进行分析。将X(t)对t在0处进行泰勒展开，有
$$X(t) = X(0)+ X^{(1)}(0)t + ... + \frac{1}{n!}X^{(n)}(0)t^n$$
利用eq.1我们可以很容易得到$X^{(n)}(0) = n!X^{n+1}(0)$    
综上，我们容易得到
$$X(t) = X(0) + X^2(0)t+X^3(0)t^2 + ... \qquad [eq3]$$
进一步的，我们还可以写作
$$X(t) = X(0)(I-X(0)t)^{-1} \qquad [eq4]$$    
当将eq.1的解写作eq.4的形式时，首先应该考虑，t取何值能保证X(t)是有意义的。显然，问题在$(I-X(0)t)^{-1}$上。根据$I-X(0) = QQ^T - QD(0)Q^T t = Q(I-D(0)t)Q^T$，保证$I - X(0)t$可逆自然要保证$I - D(0)$可逆。注意，$\lambda_1$根据我们的假设此时为最大特征值，于是t将首先达到$\frac{1}{\lambda_1}$,使得X(t)发散，所以$t<\frac{1}{\lambda_1}$。在此，我们给出膨胀时间$t^*$ = $\frac{1}{\lambda_1}$    
## 行为解释
>在本节中，我们默认满足以下条件    
>1. $\lambda_1$ > 0    
>2. $\lambda_1 \neq \lambda_2$    
>3. $w_1$分量不为零    
记$x_{i,j}:X(t),t^* = \frac{1}{\lambda_1}，||*|| 为 Frobenius 范数$    

我们发现，对于$l_k(t) = \frac{\lambda_k}{1-\lambda_k t}$,当t趋向$\frac{1}{\lambda_k}$时，发散到无穷，根据
$$x_{i,j} = \sum \limits_{k=1}^{n} q_{i,k} l_k(t) q_{j,k}$$
我们得到，此时，$x_{i,j}$也将发散到无穷。    
在本节中对时间t $\in [0,t^*)$进行考虑。    
由于我们主要关心的是符号问题，在此取$X'(t) = X(t)/||X(t)||$     
当$t \rightarrow t^*$,$X' \rightarrow X^* = Qdiag(1,0...,0)Q^T = w_1 {w_1}^T$
> 思考，当t接近膨胀时间时，无疑||X(t)||将会趋于无穷，此时主要由$l_1(t)$带来的影响。    
> $X'(t) = X(t)/||X(t)|| = Q (D(t)/||X(t)||) Q^T$。$D(t) = diag(l_1,l_2...l_n)$,    
> 此时，只有第一个位置发散。于是$X'$趋向$X^*$     

由于我们假设$w_1$的元素全不为0，于是,在t足够大时，依据我们的假设，最终将会形成一个完全二部图(组内为"+",组间为"-",可以出现某组为空的情况)
## 对上一节假设三种条件成立的合理性解释
    在本节中，主要对条件1、2、3的合理性进行了证明。我们将首先证明对于条件2、3
    依概率1成立，最终对条件1进行分析

### 原理
- 非平凡多项式的零点集合的Lebesgue测度为0    
- 对P、Q多项式有公根 $\rightleftarrows$ res(P,Q) = 0     

### 对条件2概率1成立的证明
$\lambda_1 \neq \lambda_2$。    
反之，若$\lambda_1 = \lambda_2$,我们知道，对于X(0)的特征多项式P，至少P有重根。令Q为P的一介导数，条件转化为P、Q具有公根。    
得到条件，res(P,Q) = 0。对于所有对称阵，res(P,Q)并非平凡的(至少存在一个对称阵无重根)，故满足res(P,Q) = 0 的矩阵的Lebesgue测度0。    
### 对条件3概率1成立的证明
$w_1$所有元非零。    
> Q = $[w_1,w_2...w_n]$, $w_i 为X(0)的特征向量$    

$X(0)w_k = \lambda_k w_k$,对于任意的$w_k$,若其i位为0，令$w_k'$为$w_k$去掉i位后的n-1维向量。$X_i(0)$为$X(0)$去掉i行i列后的矩阵，$P_i$为$X_i(0)$对应的特征多项式。    
我们有 $X_i(0) w_k' = \lambda_k w_k'$。换句话说，若$w_k$第i位为0，那么$\lambda_k$将同时为$X_i(0)和X(0)$的特征值，即$P,P_i$具有公根，同样可推到该情况测度0
### 对条件1的分析 
$\lambda_1 >0$。    
首先说明X(0)的选择方式。对于非对角线元素，$x_{i,j}(0)$独立从F分布中抽取，$x_{i,i}$则G分布中抽取。当然，抽取时仅对$i \leq j$,当$i >j$默认$x_{i,j}(0) =  x_{j,i}(0)$。    
对于n足够大的情况，我们有[wigner's semicircle law](https://en.wikipedia.org/wiki/Wigner_semicircle_distribution)给出特征分布密度函数，具体解释可以参照[这里](https://zhuanlan.zhihu.com/p/375591312)    
而若$\lambda_1 \leq 0$,此时，$l_i(t) = \frac{\lambda_i}{1-\lambda_i t}$,当$t \rightarrow \infty,l_i(t) \rightarrow 0$,此时，$X(t) \rightarrow 0$    
具体来看：$X(t) = QD(t)Q^T$。对$l_i(t)$展开，$u = \frac{1}{t},\quad l_i(t) = -u - u^2 {\lambda_i}^{-1} -O(u^3)$，带入D(t)并带回X(t)有：    
$$X(t) = -uI - u^2 {\lambda_i}^{-1} - O(u^3)$$    
注意，这里u为一个无穷小量。观察发现，对于 X(t)对角元素的符号为负号，由$-uI$主导。而非对角线元素符号由$-u^2 X^{-1}(0)$决定。
## 对模型行为的解释 
    在上一节中，我们主要在完全知晓X(0)的前提下，讨论了如何找到膨胀时间并确定最终的符
    号状态。但在实际操作中，我们往往无法得到完整的关系数据进行预测，这一节中，我们将
    考虑能否根据X(0)的统计特征对X(t)的行为进行描述，当然，依然是t足够大的时候。本节
    中我们将使用期望、方差进行预测。

在这一节中原文进行了数据支撑，进行了花哨的绘图，之后分析得到结果，在这里省点流量，加上水平有限，仅简述一下自己的理解。    
在跑数据时面临的问题时若底层网络为一个完全图且n很大会为我们带来困难，但经过测试我们发现对于n<100也可以显示出明显的渐进行为。经过实验最终我们确定，n=90可以对集体行为有我们希望看到的预测作用。    
仍然首先解释一下本节$X(0)$的选取方式：$X_{i,j}(0) 独立取自F_{i,j}$,并且$F_{i,j}$满足zero mass outside of [-K,K]。非对角线$F_{i,j} 有共同期望u和有限的方差\sigma^2$,而$x_{i,i}对应的F_{i.i}有共同期望v和方差\tau^2$。$F_{i,j}关于u对称$。    
接下来，我们将分别就u>0,u=0,u<0$进行讨论，并给出结果   
### $u>0$
对于这种情况，根据[9](),我们知道$w_1$与(1,1,1,..1)/$\sqrt{n}$的偏差在大n下消失。因此，系统最终状态时由一大群朋友组成且最多有一部分节点在消失(?)。此外，通过假设$\sigma$的界可以给出更强的命题，在$\sigma < u/2$,最终状态将由一个朋友圈组成且无负边。在之前对eq.1分析时，我们取均值可以得到
$$x(t) = \frac{u}{1-ut} \qquad [eq5]$$
通过大量的工作，可以证明
$$ \lim_{n \rightarrow \infty}x_{i,j}(t) = x_{i,j}(0) - u + \frac{u}{1-ut}$$
对于所有的$t \in [0,K)$,膨胀时间为$t^* = \frac{1}{u}$。这里我们在时间的处理上放大了n倍，对于未缩放的系统，这个$t^*$应该趋近于1/(un)的放大时间
### $u = 0$
为方便起见，令$A = X(0)$,$a_{i,j}:A$, 我们首先将要证明，    
> 对于任意的D，D为一个对角阵且元素为1 or -1,任意的对称阵A，我们有    
> A与B = DAD是同分布的    

A为对称的，我们知道，$P(a_{i,j} \in S_{i,j}) = P({-a_{i,j} \in S_{i,j}})$,其中，$S_{i.j}$为任意区间。则A与B同分布已证。    
我们知道，A与B同分布等价于对于任意的Borel集S，$P(A \in S ) = P(B \in S)$。    
考虑$S为S_{i,j}的乘积空间$，我们有，$P(A \in S ) = \prod_{i \leq j} P(a_{i,j} \in S_{i,j})$,$P(B \in S) = \prod_{i \leq j}P(d_i a_{i,j} d_j \in S_{i,j})$    
考虑集合S为$w_1$全为正元素的矩阵集合。此时，从S中选取A的概率等于B在S中而A任取的概率。我们发现，若$A(Dw_1) = \lambda_1(Dw_1)$,那么我们可以得到$B(w_1) = \lambda_1 w_1$,而由于$B \in S$,对于A的特征向量$Dw_1$,D任取，所以最终$w_1$元素正负参半。    
根据[9](),知$\lambda_1 \in 2 \sigma \sqrt{n} + O(n^{1/3} logn)$
### $u < 0$
根据半圆定律，$\lambda_1 < 2\sigma \sqrt{n} + O(n^{ 1/3}logn)$,$\lambda_1 > 2 \sigma \sqrt{n} + o(\sqrt{n})$。 我们知道$t^*$为$O(\frac{1}{\sqrt{n{}}})$    
我们直接令C = -A,A为X(0)在$u>0$的情况。那么此时，我们可以直接带入$u>0$的情况。    
根据$x(t) = \frac{u}{1-ut}$自然不会发散。    
实际上，此时可以分为两个阶段，第一阶段$t \rightarrow O(\frac{1}{n})$,此时$x_{i,j} = x_{i,j}(0) -u + \frac{u}{1-ut}$,在第一阶段结束，会使得u=0，之后进行第二阶段的演化$t \rightarrow O(\frac{1}{\sqrt{n}})$，参考情况2。    
